#summary Adding the Google APIs Objective-C Client Library to a Project
#labels Featured

<wiki:toc max_depth="4" />

= Adding the Google APIs Objective-C Client Library to a Project =

The Google APIs Objective-C Client Library's core classes are provided as a built framework, suitable for inclusion in a Mac application bundle's Frameworks folder, and as a static library for iOS applications.  

Alternatively, all of the library's sources may also be compiled directly into a Mac or an iOS application.

Service-specific classes, such as for Tasks and Drive, are provided in separate folders. They are not compiled into the library or framework with the core classes, so the needed service classes should should be dragged into the application project.

*Use one of the following three approaches* to add the library to your project. Do not attempt to build and link the framework target for iOS applications.

== Linking to the iOS Static Library ==

The library project includes a target for building a static library for iOS apps. The static library target should be dragged into your application project's Build Phases "Link Binary with Libraries" list. 

The static library target also creates a folder with the library's headers to drag into your target's sources. The headers folder is created in the build products directory. To find build products directory, in Xcode 4's Locations preferences pane, click the arrow for Derived Data.

*_Tip:_* Use an Xcode 4 workspace for your application to keep library project sources available.

Next, add the [http://developer.apple.com/library/mac/#qa/qa1490/_index.html ObjC link option] to the application target's build settings, along with the all_load flag:

  Other Linker Flags: `-ObjC -all_load`

Also drag the folder with the class files for the services needed by your application, such as Tasks or Books, directly into your project. From the generated files folder, include in your project either the individual class .m files for the service or the service's _Sources.m file, but not both.

Application classes using the library should include the header for each specific service, such as

`#import "GTLTasks.h"`

*_Note:_* To support the OAuth 2 sign-in classes in the library, your application will need to link to Security.framework and !SystemConfiguration.framework. 

== Linking to the Mac OS X Framework ==

To add the framework to an Xcode project, drag GTL.framework to the project's Linked Frameworks source group, then drag the GTL framework from the  Linked Frameworks group folder to the Link Binary With Library phase inside of the application target.  

Drag the folder with the class files for the services needed by your application, such as Tasks or Books, directly into your project.

For both debug and release builds of your application, add this define to your project file:

-DGTL_BUILT_AS_FRAMEWORK=1

Application classes using the library should include the header for each specific service, such as

`#import "GTLTasks.h"`


To facilitate debugging, you may choose to include the GTL.xcodeproj project file either in an Xcode 4 workspace for your application or directly in your application project as a cross-project reference.  The example applications show how to include a reference to the GTL framework project file in an Xcode project.

*_Tip_*: if Xcode's debugger is ignoring breakpoints set in the framework, turn off the [http://developer.apple.com/mac/library/documentation/DeveloperTools/Conceptual/XcodeDebugging/150-Debugging_Preferences/debugging_preferences.html "Load symbols lazily" option] in Xcode's Debugging preferences.

*_Note:_* To support the OAuth 2 sign-in classes in the library, your application will need to link to Security.framework and !SystemConfiguration.framework. 

== Compiling the Source Files Directly into a Mac or iOS Application ==

Rather than link to the GTL framework, you can compile the GTL library sources directly into your own project. To do this, option-click the group arrow to fully expand the GTL Sources source group, and select all of the files in the Common group, and drag the files from the GTL Xcode project into your project's window (add by reference, not by copying the files.)

*Note:* For the OAuth 2 files, add to your project either the Touch (for iOS) or the Mac group, but not both. 

Also drag the folder with the class files for the services needed by your application, such as Tasks or Calendar, directly into your project.

Application classes using the library should include the header for each specific service, such as

`#import "GTLTasks.h"`

For just the Debug configuration of your target, add this compiler definition to ensure that the library's debug-only code is included:

 Other C Flags: `-DDEBUG=1`

Or, if the Other C Flags setting is not available in your target's build options, set the equivalent user-defined setting:

  `OTHER_CFLAGS=-DDEBUG=1`

=== ARC Compatibility ===

When the library source files are compiled directly into a project that has ARC enabled, then ARC must be disabled specifically for the library source files.

*To disable ARC for source files in Xcode 4*, select the project and the target in Xcode. Under the target "Build Phases" tab, expand the Compile Sources build phase, select the library source files, then press Enter to open an edit field, and type  `-fno-objc-arc`  as the compiler flag for those files.